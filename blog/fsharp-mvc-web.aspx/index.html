<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="alternate" type="application/rss+xml" title="Latest news from Tomas Petricek" href="/rss.xml" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">  
    
  <link href="/custom/style.css" rel="stylesheet">
  <link href="/custom/tooltips.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-big.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/favicon-big.png">
  <meta name="msapplication-TileColor" content="#00202D">
  <meta name="msapplication-TileImage" content="/img/favicon-big.png">
  <meta name="theme-color" content="#00202D">  
  
  
  <title>ASP.NET and F# (I.) - Creating MVC web applications in F# - Tomas Petricek</title>

  <meta name="description" content=" This article shows how to use F# for developing ASP.NET web applications using the MVC framework. It also shows how to access data using LINQ in F# and how to simplify web programming using F# meta-programming, modules and records." />
  <meta name="keywords" content=".net, functional, web, meta-programming, f#, " />  
  <meta name="author" content="Tomas Petricek" />
  <meta name="copyright" content="Tomas Petricek" />
  
  <meta property="og:title" content="ASP.NET and F# (I.) - Creating MVC web applications in F#" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://tomasp.net/blog/fsharp-mvc-web.aspx/" />
  <meta property="og:image" content="" />
  <meta property="og:description" content=" This article shows how to use F# for developing ASP.NET web applications using the MVC framework. It also shows how to access data using LINQ in F# and how to simplify web programming using F# meta-programming, modules and records." />
  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@tomaspetricek">
  <meta name="twitter:creator" content="@tomaspetricek">  
  <meta name="twitter:title" content="ASP.NET and F# (I.) - Creating MVC web applications in F#" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:description" content=" This article shows how to use F# for developing ASP.NET web applications using the MVC framework. It also shows how to access data using LINQ in F# and how to simplify web programming using F# meta-programming, modules and records." />
    
  <script type="application/ld+json">
  {
  	"@context": "http:\/\/schema.org",
  	"@type": "Article",
  	"name": "ASP.NET and F# (I.) - Creating MVC web applications in F#",
    "headline": "ASP.NET and F# (I.) - Creating MVC web applications in F#",
  	"description": " This article shows how to use F# for developing ASP.NET web applications using the MVC framework. It also shows how to access data using LINQ in F# and how to simplify web programming using F# meta-programming, modules and records.",
  	"url": "http://tomasp.net/blog/fsharp-mvc-web.aspx/",
  	"author": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	},
  	"creator": ["Tomas Petricek"],
  	"dateCreated": "2010-05-09T20:43:52.0000000",
  	"datePublished": "2010-05-09T20:43:52.0000000",
    "dateModified": "2010-05-09T20:43:52.0000000",
    "mainEntityOfPage": "http://tomasp.net/blog/fsharp-mvc-web.aspx/",
  	"image": "",
  	"thumbnailUrl": "",
  	"keywords": [".net", "functional", "web", "meta-programming", "f#",  "tomas", "petricek"],
  	"inLanguage": "en-us",
  	"publisher": {
  		"@type": "Person",
  		"name": "Tomas Petricek",
  		"url": "http://tomasp.net",
      "logo": "http://tomasp.net/img/favicon-big.png",
  		"sameAs": ["http://twitter.com/tomaspetricek"]
  	}
  }  
  </script>
  
</head>
<body class="default">  
  <div class="not-footer">
  <div class="top-panel-wrapper">
  <div class="top-panel">
  <div id="tomas" class="visible-" itemscope itemtype="http://schema.org/Person"><header>
    <div class="container">
      <div class="col-md-8">
        
        <div class="row">
          <div class="col-xs-12 col-sm-8 col-md-12" style="padding:0px">
            <h2 itemprop="name">Tomas Petricek</h1>
            <h3 itemprop="description">Searching for new ways of thinking in programming &amp; working with data</h2>
            <div> 
              <img src="/img/tomas-sl-sq.jpg" class="hidden-lg hidden-md hidden-sm tomas-float" />
                <p>I believe that the most interesting work is not the one solving hard problems, but the one changing how
                  we think about the world. I follow this belief in my work on data science tools,
                  functional programming and F# teaching, in my programming languages research
                  and I try to understand it through philosophy of science.
                </p>
            </div>
          </div>
          <div class="hidden-lg hidden-md col-sm-4 hidden-xs">
            <img src="/img/tomas-sl-sq.jpg" class="tomas-square" />
            <p class="social">
              <a title="Follow my occasional rants" itemprop="sameAs" href="http://twitter.com/tomaspetricek"><i class="fa fa-twitter"></i></a>
              <a title="Send me a message" itemprop="sameAs" href="mailto:tomas@tomasp.net"><i class="fa fa-envelope"></i></a>
              <a title="Most of my open-source projects" itemprop="sameAs" href="http://github.com/tpetricek"><i class="fa fa-github-alt"></i></a>
              <a title="My F# answers on StackOverflow" itemprop="sameAs" href="http://stackoverflow.com/users/33518/tomas-petricek"><i class="fa fa-stack-overflow"></i></a>
              <a title="Read my papers!" itemprop="sameAs" href="http://dblp.uni-trier.de/pers/hd/p/Petricek:Tomas"><i class="fa fa-university"></i></a>
              <a title="Send me recruiter spam?" itemprop="sameAs" href="https://www.linkedin.com/in/tomaspetricek"><i class="fa fa-linkedin-square"></i></a>
            </p>
          </div>
        </div>
          
        <div class="row themes">
          <div class="col-sm-4">
            <h4><a href="http://thegamma.net"><i class="fa fa-area-chart"></i> The Gamma</a></h3>
            <p>I'm working on making data-driven storytelling easier, more open and reproducible
              at the <a href="https://turing.ac.uk/">Alan Turing Institute</a>.</p>              
          </div>
          <div class="col-sm-4">
            <h4><a href="http://fsharpworks.com"><i class="fa fa-industry"></i> Consulting</a></h3>
            <p>I'm author of definitive F# books and open-source libraries.
              I offer my F# training and consulting services as part of 
              <a href="http://fsharpworks.com">fsharpWorks</a>.</p>
          </div>
          <div class="col-sm-4">
            <h4><a href="/academic"><i class="fa fa-university"></i> Academic</a></h3>
            <p>I published papers about theory of context-aware programming languages, 
              type providers, but also philosophy of science.</p>
          </div>
        </div>
          
      </div>
      
      <div class="col-sm-4">
        <img itemprop="image" src="/img/tomas-sl-wide.jpg" class="hidden-sm hidden-xs tomas-wide" />
        <p class="social hidden-sm">
          <a title="Follow my occasional rants" itemprop="sameAs" href="http://twitter.com/tomaspetricek"><i class="fa fa-twitter"></i></a>
          <a title="Send me a message" itemprop="sameAs" href="mailto:tomas@tomasp.net"><i class="fa fa-envelope"></i></a>
          <a title="Most of my open-source projects" itemprop="sameAs" href="http://github.com/tpetricek"><i class="fa fa-github-alt"></i></a>
          <a title="My F# answers on StackOverflow" itemprop="sameAs" href="http://stackoverflow.com/users/33518/tomas-petricek"><i class="fa fa-stack-overflow"></i></a>
          <a title="Read my papers!" itemprop="sameAs" href="http://dblp.uni-trier.de/pers/hd/p/Petricek:Tomas"><i class="fa fa-university"></i></a>
          <a title="Send me recruiter spam?" itemprop="sameAs" href="https://www.linkedin.com/in/tomaspetricek"><i class="fa fa-linkedin-square"></i></a>
        </p>
      </div>
    </div>
  </header></div>
  
  <div class="nav-wrapper hidden-xs-home">
  <nav>
    <div class="container"><div class="col-sm-12">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand visible-xs hidden-home toggle-tomas" href="/">Tomas Petricek <i class="tomas-fa fa fa-caret-up"></i></a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right hidden-xs hidden-home">
          <li><a class="toggle-tomas" href="/">Tomas Petricek <i class="tomas-fa fa fa-caret-up"></i></a></li>
        </ul>
        <ul class="nav navbar-nav navbar-left">
          <li><a href="/">Home</a></li>
          <li><a href="http://fsharpworks.com"><span class="hidden-sm">F#</span> Trainings</a></li>
          <li><a href="http://fsharpworks.com/materials.html">Talks<span class="hidden-sm"> and books</span></a></li>
          <li><a href="http://thegamma.net/">The Gamma</a></li>
          <li><a href="/academic/" class="last-left">Academic</a></li>
        </ul>
      </div>
    </div></div>
  </nav></div>
  </div></div>
  
  
  <article class="post">
    <div class="container"><div class="row">
      <div class="col-lg-2 col-md-1"></div>
      <div class="col-xs-12 col-sm-12 col-md-10 col-lg-8">
        <h1>ASP.NET and F# (I.) - Creating MVC web applications in F#</h1>
<p>Some time ago, I wrote a couple of examples of <a href="http://tomasp.net/blog/aspnet-in-fsharp.aspx">
  developing web applications in F# using ASP.NET</a>. Since then, the F# language and runtime has changed
  a little bit and there are also new technologies available in ASP.NET, so I thought I'd write a more
  up-to-date article on this topic. In this article, I'll present a simple "demo" F# web application that
  you can use as a starting point when creating your own projects (you'll also find a convenient Visual
  Studio 2010 template below). The article shows the following interesting things:</p>
<ul>
  <li><strong>ASP.NET MVC</strong> - We're going to use ASP.NET MVC Framework to create the web
    application. As the article name suggests, most of the actual program code including models and
    controllers will be implemented in F#.</li>
  <li><strong>F# LINQ to SQL</strong> - The application uses a sample Northwind database and we'll
    write queries for selecting data from the database using LINQ support that's available in the
    <a href="http://fsharppowerpack.codeplex.com/" type="external">F# PowerPack</a>.</li>
  <li><strong>F# features</strong> - The application also uses some nice F# features that are 
    quite useful for developing web applications. We'll use modules and records to implement the
    model and we'll also use advanced meta-programming features for constructing LINQ queries.</li>
</ul>
<p>If you want to use F# for creating an MVC application, you have a few options. It should be 
  possible to create the web application solely as an F# project. However, we'll use a more convenient
  approach. We'll create a standard C# MVC project and move all the actual implementation to 
  an F# library. We'll look at the application structure shortly. The following screenshot shows
  a page that lists products in the Northwind database:</p>

<div style="text-align:center;">
<img src="http://tomasp.net/articles/fsharp-mvc-web/web.png" />
</div>

<h2>Application structure</h2>
<img src="http://tomasp.net/articles/fsharp-mvc-web/project.png" style="float:right;margin:10px" />
<p>The most convenient way to create an MVC web application, which is implemented in F# is to
  mix several C# and F# projects in a single solution. F# doesn't include web project templates 
  and doesn't implement all Visual Studio tools that are needed for comfortable web development,
  so we'll create a C# projects that allow us to use LINQ to SQL and ASP.NET designers. All 
  important pieces of code will be written in F# though!</p>
<ul>
  <li><strong>WebApplication</strong> is the main MVC web application project. This is a C#
    project, but it doesn't contain almost any code, because model and all controllers are 
    implemented in a referenced F# library. This project mainly contains views (<code>aspx</code>
    files) and other resources (such as stylesheets and database).</li>
  <li><strong>WebApplication.Core</strong> is an F# project that implements the core
    functionality of the application. In the sample application, it contains <code>Model.fs</code>,
    which implements the functionality for accessing data and two controllers (<code>HomeController.fs</code>
    for the main page and <code>ProductsController.fs</code> for working with products database).
    The <code>Global.fs</code> file registers routes for the URL rewriting.</li>
  <li><strong>WebApplication.Data</strong> is a simple C# project that contains only generated
    LINQ to SQL classes for our sample database. Although it is possible to rewrite the classes to F#,
    it is more convenient to use the tool available for C# in Visual Studio.</li>
</ul>
<p>When creating the projects by hand, you'll need to translate the generated controllers from 
  C# to F# and you'll need to add all relevant ASP.NET references to the F# library project 
  (there is an absurd number of them). However, you shouldn't face any difficulties or tricky
  problems. In any case, it is easier to start using the Visual Studio 2010 template that you
  can download below.</p>
<p>Now that we looked at the application structure, we'll look at a couple of interesting 
  places in the application. This may give you an idea of some benefits that F# provides to
  web developers (although the sample is only very basic!)</p>

<h2>Implementing model in F# with LINQ</h2>
<p>As already mentioned, I decided to use the F# implementation of LINQ to SQL for data access in 
  the application. There are only a few articles about this topic, so we'll discuss it in some more
  details. As already mentioned, LINQ to SQL cannot generate the classes natively in F#, so I 
  created a separate C# project that contains just the generated classes.</p>
<p>The following listing shows the content of the <code>Model.fs</code> (without a single function
  that will be discussed shortly). As you can see, I created one record type for storing information
  about products that will be displayed in the page (we'll use it later). The rest of the model
  is implemented as an F# module, which means that it will appear as static class to .NET. Modules
  are quite useful for storing functionality that doesn't need to be encapsulated in a class, so
  this is a perfect fit:</p>
<pre lang="fsharp">
namespace WebApplication.Core

open Microsoft.FSharp.Quotations
open Microsoft.FSharp.Linq
open Microsoft.FSharp.Linq.Query

// Namespace with LINQ to SQL generated classes
open WebApplication.Data

// Stores information about product (will be used later)
type ProductInfo = {
  ID : int
  Name : string
  Category : string
  Price : System.Decimal }

// Implementes the model for our MVC application
module Model = 
  // Returns the 'Product' entity with the given ID
  let ProductDetail (id) =
    let dx = new NorthwindDataContext()
    &lt;@@ seq { for p in dx.Products do
               if (p.ProductID = id) then yield p }
               |&gt; Seq.head @@&gt; |&gt; query
</pre>
<p>The <code>ProductDetail</code> function first creates a new instance of the generated data context
  and then runs the query. A query in F# is written using quotations. This means that the data-processing
  code is enclosed in <code>&lt;@@ ... @@&gt;</code>, which instructs the compiler to store the expression
  tree of the code (instead of compiling it). The quotation is then passed to the built-in 
  <code>query</code> function that interprets it as a LINQ query.</p>
<p>Inside the query, you can use sequence expressions as well as some basic functions from the 
  <code>Seq</code> module. In our application, we're using sequence expression that selects all products
  with the specified ID and then use the <code>Seq.head</code> function to get only first such 
  product.</p>

<h3>Composing LINQ queries</h3>
<p>The second function implemented in the model will return a list of products. I made it a bit more
  sophisticated to demonstrate some interesting capabilities of the F# support for LINQ. In 
  particular, the function takes a parameter that can specify how to sort the products. The 
  parameter is a quotation that represents the expression tree of a key selector that specifies
  how products should be sorted. A key selector is a function that takes a product and returns
  some its property (or even calculated value). For example, to sort products using the length
  of the product name, the key selector would be <code>&lt;@@ fun p -> p.ProductName.Length @@&gt;</code>.
  Let's first look at the code and I'll explain how the key selector is used after that:</p>
<pre lang="fsharp">
let ListProducts (keySelector:Expr&lt;Product -> 'T&gt;) =
  let dx = new NorthwindDataContext()
  &lt;@@ seq { for p in dx.Products |&gt; Seq.sortBy %keySelector do
              for c in dx.Categories do
                if (p.CategoryID.Value = c.CategoryID) then
                  yield { ID = p.ProductID
                          Name = p.ProductName 
                          Category = c.CategoryName 
                          Price = p.UnitPrice.Value } } @@&gt; |&gt; query
</pre>
<p>The <code>keySelector</code> parameter has a type <code>Expr&lt;Product -> 'T&gt;</code>, which
  means that it is an expression tree (or a quotation, in the F# terminology) of some 
  function that takes a <code>Product</code> and returns some value - the function is 
  generic, so the value can be anything. It is used in the quoted expression as a parameter
  of the <code>Seq.sortBy</code> function. We use <code>%keySelector</code>, which means that
  the quotation of the key selector will be "spliced" into the quotation we're writing.
  When we pass the quoted query to the <code>query</code> function later, it will see the 
  actual expression in place of the variable spliced using the <code>%</code> operator.
  This allows us to compose queries from individual pieces, which is quite useful and 
  cannot be directly done in C# - we can for example dynamically compose the <code>WHERE</code>
  clause using conditions specified by the user.</p>
<p>The sample query also uses a sequence expression with nested <code>for</code> loops to 
  implement the <code>JOIN</code> functionality. Although this isn't needed, because the 
  <code>Product</code> entity contains a reference to the associated <code>Category</code>,
  I wrote the join explicitly to demonstrate a more complex LINQ query in F#. Finally, when
  returning the result using the <code>yield</code> keyword, we construct a value of the
  record defined in the previous listing (which is a bit simpler than declaring and creating a 
  class in C#).</p>

<h2>Implementing controllers in F#</h2>
<p>Now that we have the module implementing the model component of our MVC application, we'll also
  need to implement the controller. We'll look at the content of the <code>ProductsController.fs</code>
  file, which is more interesting as it uses the model and also calls the <code>ListProducts</code>
  function with several different key selectors as arguments.</p>
<p>The class contains two members that implement two actions of the controller. The member
  <code>List</code> loads a list of products from the database. It has a parameter which may be
  <code>null</code> and specifies the ordering of products (simply as an integer). The second
  member returns details about the specified product and is named <code>Detail</code>:</p>  
<pre lang="fsharp">
let (|NonNull|_|) (a:Nullable&lt;_&gt;) =
  if a.HasValue then Some(a.Value) else None

type ProductsController() =
  inherit Controller()
  
  member x.List(id:Nullable&lt;int&gt;) =
    x.ViewData.Model &lt;- 
      match id with
      | NonNull(1) -&gt; Model.ListProducts &lt;@@ fun p -&gt; p.UnitPrice.Value @@&gt;
      | NonNull(2) -&gt; Model.ListProducts &lt;@@ fun p -&gt; p.CategoryID.Value @@&gt;
      | _ -&gt; Model.ListProducts &lt;@@ fun p -&gt; p.ProductName @@&gt;
    x.View() 

  member x.Detail(id:int) =
    x.ViewData.Model &lt;- Model.ProductDetail id
    x.View() 
</pre>
<p>The listing first defines a simple active pattern that is useful when working with 
  <code>Nullable&lt;T&gt;</code> values. It matches when the value given as an argument
  contains some value and fails when the value is empty. We use it in the <code>List</code>
  member where we need to select the ordering. When the parameter contains 1, we order 
  products by price, parameter 2 specifies ordering by category and in all other cases
  (including empty value) we use default ordering by the product name. As you can see
  we specify several different key selectors (functions taking <code>Product</code> enclosed
  in quotation using <code>&lt;@@ ... @@&gt;</code>) of various return types. This is possible,
  because the <code>ListProducts</code> function is generic.</p>
<p>In both of the actions, we assign the result to the <code>Model</code> property of the
  <code>ViewData</code>. This allows the view to access the model in a type-safe way.
  The code in the view is standard C# code, so we won't look at it here - it is just worth
  mentioning that F# records appear as standard .NET classes to the C# code, so the 
  integration is very smooth.</p>


<h2>Summary</h2>
<p>When developing ASP.NET MVC application in F#, the most convenient thing to do is to 
  create a C# project and move all implementation to an F# library that is then referenced from
  the C# project (which contains only <code>aspx</code> files and other content related to the
  presentation layer). In F#, we can use LINQ for accessing data and the fact that quotations
  can be nicely composed using <em>splicing</em> allows us to implement some patterns that are 
  not easy to write in C#. Moreover, F# features such as modules and records as well as pattern 
  matching are quite useful in web development. However, this article contains only a very
  basic example that doesn't really take the full advantage of F#, so can only encourage you to 
  download the template below and try experimenting yourself!</p>

<h2>Visual Studio 2010 template</h2>
<img src="http://tomasp.net/articles/fsharp-mvc-web/template.png" style="float:right;margin:10px" />
<p>As already mentioned, I created a simple template based on the described project that
  allows you to simply create MVC web applications that use F# by selecting the template
  in Visual Studio 2010. To increase your appetite, the screenshot on the right is taken
  from my "New Project" dialog after installing the template. There are two minor gotchas
  with projects created from the template that you need to go through:</p>
<ol>
  <li>You'll need to go to the <code>WebApplication.Data</code> project and generate the
    LINQ to SQL classes from the database description manually (for some reason, this doesn't
    happen automatically when you build the project). To do this, right click on <code>Nortwind.dbml</code>
    and select "Run Custom Tool" command.</li>
  <li>You'll need to fix the reference from <code>WebApplication.Core</code> to 
    <code>WebApplication.Data</code> - simply remove the existing reference and add it again
    (choosing the reference to another project in the solution).</li>
</ol>
<p>Once that's done, you should be able to run the project (assuming that you have SQL Server Express
  installed - the version that comes with Visual Studio 2010 is fine). In case you don't want a 
  template for Visual Studio, you can also download the sample as a stand-alone solution:</p>
<ul>
  <li><a href="http://tomasp.net/articles/fsharp-mvc-web/FsWebApplication.vsi">Download Visual Studio 2010 project template</a> (VSI, 808kB)<br />
    NOTE: Save the file with the <code>vsi</code> extension and then open it to import the template.</li>
  <li><a href="http://tomasp.net/articles/fsharp-mvc-web/FsWebApplication.zip">Download the sample solution</a> (ZIP, 924kB)</li>
</ul>

        <div class="info">
        <p class="share">
            <a target="_blank" href="https://twitter.com/intent/tweet?url=http%3a%2f%2ftomasp.net%2fblog%2ffsharp-mvc-web.aspx%2f&amp;text=ASP.NET+and+F%23+(I.)+-+Creating+MVC+web+applications+in+F%23via+%40tomaspetricek">
              <i class="fa fa-twitter-square"></i></a>
            <a target="_blank" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2ftomasp.net%2fblog%2ffsharp-mvc-web.aspx%2f">
              <i class="fa fa-facebook-official"></i></a>
            <a href="http://www.reddit.com/submit?url=http%3a%2f%2ftomasp.net%2fblog%2ffsharp-mvc-web.aspx%2f&title=ASP.NET+and+F%23+(I.)+-+Creating+MVC+web+applications+in+F%23">
              <i class="fa fa-reddit-square"></i></a>
            <a href="mailto:?subject=ASP.NET%20and%20F%23%20(I.)%20-%20Creating%20MVC%20web%20applications%20in%20F%23&body=%20This%20article%20shows%20how%20to%20use%20F%23%20for%20developing%20ASP.NET%20web%20applications%20using%20the%20MVC%20framework.%20It%20also%20shows%20how%20to%20access%20data%20using%20LINQ%20in%20F%23%20and%20how%20to%20simplify%20web%20programming%20using%20F%23%20meta-programming%2c%20modules%20and%20records.%0a%0aSee%3a%20http%3a%2f%2ftomasp.net%2fblog%2ffsharp-mvc-web.aspx%2f">
              <i class="fa fa-envelope"></i></a>
        </p>
        <p class="details">
          <strong>Published:</strong> Sunday, 9 May 2010, 8:43 PM<br />
          <strong>Author:</strong> Tomas Petricek<br />
          <strong>Typos:</strong> <a href="http://github.com/tpetricek/tomasp.net">Send me a pull request</a>!<br />
          <strong>Tags:</strong> <a
          href="/blog/tag/dotnet/">.net</a>, <a
          href="/blog/tag/functional/">functional</a>, <a
          href="/blog/tag/web/">web</a>, <a
          href="/blog/tag/meta-programming/">meta-programming</a>, <a
          href="/blog/tag/fsharp/">f#</a></span><br />
        </p>
        </div>
      </div>
    </div></div>
  </article>

  
  </div>
  <footer>
  <div class="container"><div class="row">
    <div class="col-sm-3">
      <h4>Contact &amp; about</h4>
      <p>This site is hosted on GitHub and is generated using <a href="https://github.com/tpetricek/FSharp.Formatting">F# Formatting</a>
        and <a href="http://dotliquidmarkup.org/">DotLiquid</a>.
        For more info, see the <a href="https://github.com/tpetricek/tomasp.net">website source on GitHub</a>.
      </p>
      <p>Please submit issues &amp; corrections on GitHub. Use pull requests for minor corrections only.</p>
      <ul>
        <li><i class="fa fa-twitter"></i> Twitter: <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a></li>
        <li><i class="fa fa-github"></i> GitHub: <a href="https://github.com/tpetricek">@tpetricek</a></li>
        <li><i class="fa fa-envelope"></i> Email me: <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></li>
      </ul>
    </div>
    <div class="col-sm-7">
    <h4><a href="http://tomasp.net/rss.xml"><i class="fa fa-rss" style="margin-right:5px;"></i></a> Blog archives</h4>
      
      <a href="/blog/archive/july_2020/">July 2020 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2020/">April 2020 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2019/">December 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2019/">February 2019 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2018/">November 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2018/">October 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2018/">May 2018 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2017/">September 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2017/">June 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2017/">April 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2017/">March 2017 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2017/">January 2017 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2016/">October 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2016/">September 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/august_2016/">August 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2016/">July 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2016/">May 2016 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2016/">April 2016 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2015/">December 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2015/">November 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2015/">September 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2015/">July 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2015/">June 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2015/">May 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2015/">April 2015 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2015/">March 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2015/">February 2015 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2015/">January 2015 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2014/">December 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/may_2014/">May 2014 (3)</a>,&nbsp;
      
      <a href="/blog/archive/april_2014/">April 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2014/">March 2014 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2014/">January 2014 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2013/">December 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2013/">November 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2013/">October 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2013/">September 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2013/">August 2013 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2013/">May 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2013/">April 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2013/">March 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2013/">February 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/january_2013/">January 2013 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2012/">December 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/october_2012/">October 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2012/">August 2012 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2012/">June 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2012/">April 2012 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2012/">March 2012 (4)</a>,&nbsp;
      
      <a href="/blog/archive/february_2012/">February 2012 (5)</a>,&nbsp;
      
      <a href="/blog/archive/january_2012/">January 2012 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2011/">November 2011 (5)</a>,&nbsp;
      
      <a href="/blog/archive/august_2011/">August 2011 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2011/">July 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/june_2011/">June 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2011/">May 2011 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2011/">March 2011 (4)</a>,&nbsp;
      
      <a href="/blog/archive/december_2010/">December 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2010/">November 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2010/">October 2010 (6)</a>,&nbsp;
      
      <a href="/blog/archive/september_2010/">September 2010 (4)</a>,&nbsp;
      
      <a href="/blog/archive/july_2010/">July 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/june_2010/">June 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/may_2010/">May 2010 (1)</a>,&nbsp;
      
      <a href="/blog/archive/february_2010/">February 2010 (2)</a>,&nbsp;
      
      <a href="/blog/archive/january_2010/">January 2010 (3)</a>,&nbsp;
      
      <a href="/blog/archive/december_2009/">December 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/july_2009/">July 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2009/">June 2009 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2009/">May 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2009/">April 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2009/">March 2009 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2009/">February 2009 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2008/">December 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/november_2008/">November 2008 (5)</a>,&nbsp;
      
      <a href="/blog/archive/october_2008/">October 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2008/">September 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2008/">June 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/march_2008/">March 2008 (3)</a>,&nbsp;
      
      <a href="/blog/archive/february_2008/">February 2008 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2007/">December 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2007/">November 2007 (6)</a>,&nbsp;
      
      <a href="/blog/archive/october_2007/">October 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/september_2007/">September 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/august_2007/">August 2007 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2007/">July 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2007/">April 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/march_2007/">March 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/february_2007/">February 2007 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2007/">January 2007 (2)</a>,&nbsp;
      
      <a href="/blog/archive/november_2006/">November 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/october_2006/">October 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/august_2006/">August 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/july_2006/">July 2006 (1)</a>,&nbsp;
      
      <a href="/blog/archive/june_2006/">June 2006 (3)</a>,&nbsp;
      
      <a href="/blog/archive/may_2006/">May 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/april_2006/">April 2006 (2)</a>,&nbsp;
      
      <a href="/blog/archive/december_2005/">December 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/july_2005/">July 2005 (4)</a>,&nbsp;
      
      <a href="/blog/archive/june_2005/">June 2005 (5)</a>,&nbsp;
      
      <a href="/blog/archive/may_2005/">May 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/april_2005/">April 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/march_2005/">March 2005 (3)</a>,&nbsp;
      
      <a href="/blog/archive/january_2005/">January 2005 (1)</a>,&nbsp;
      
      <a href="/blog/archive/december_2004/">December 2004 (3)</a>,&nbsp;
      
      <a href="/blog/archive/november_2004/">November 2004 (2)</a>,&nbsp;
      
    </div>
    <div class="col-sm-2">
      <h4>License</h4>
      <p>Unless explicitly mentioned, all articles on this site are licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution Share Alike</a>.
        All source code samples are licensed under the MIT License.
      </p>
      <p style="text-align:center;margin-top:15px;"><img src="http://tomasp.net/img/cc-sa.png" alt="CC License logo" /></p>
    </div>
  </div></div>
  </footer>

  <!-- Third-party standard references -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
    integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>  
  <script type="text/javascript" src="/custom/tooltips.js"></script>
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1561220-1']);
    _gaq.push(['_trackPageview']);
    (function () {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script type="text/javascript">
    var small = (window.innerWidth * window.innerHeight) < 500000;
    if (!small) {
      if ($("body").attr("class").trim() == "home") $('nav').affix({ offset: { top: $('header').outerHeight() }}); 
      else $('.top-panel').addClass("fixed");
    }
    var opened = false;
    function hideOrShow() {
      opened = !opened;
      $("#tomas").show(); 
      $(".tomas-fa").toggleClass("fa-caret-up");
      $(".tomas-fa").toggleClass("fa-caret-down");
      $("#tomas").css("max-height", $("#tomas").css("max-height")!="800px"?"800px":"0px");
      return false; 
    }
    $('.toggle-tomas').on("click", hideOrShow);
    window.onscroll = function() { if (opened) {
      if (!small) hideOrShow(); 
    } };
  </script>
</body>
</html>
